<%- include('../partials/header') %>

<div class="min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 py-12">
  <div class="max-w-2xl mx-auto">
    <!-- Card -->
    <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-indigo-900">
      <!-- Card Header -->
      <div class="bg-indigo-900 text-center p-6 border-b-2 border-yellow-400">
        <h3 class="text-2xl font-bold text-yellow-400">Edit Your Profile</h3>
      </div>

      <!-- Card Body -->
      <div class="p-6 space-y-6">
        <% if (error) { %>
          <div class="bg-red-50 border-l-4 border-red-600 text-red-800 p-4 rounded">
            <p><%= error %></p>
          </div>
        <% } %>

        <form action="/user/edit" method="POST" enctype="multipart/form-data" class="space-y-6">
          <!-- Profile Image Section -->
          <div class="text-center space-y-4">
            <label for="profileImage" class="block text-sm font-medium text-indigo-900">
              Upload Profile Image
            </label>
            <input
              type="file"
              name="profileImage"
              id="profileImage"
              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-yellow-400 focus:border-yellow-400"
            />
            <% if (user.profileImage) { %>
              <div class="text-sm text-gray-700">
                Current Image:
                <img
                  src="<%= user.profileImage %>"
                  alt="Current Profile Image"
                  class="w-24 h-24 mx-auto rounded-md border-2 border-yellow-400"
                />
              </div>
            <% } %>
          </div>

          <!-- Form Fields -->
          <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
            <div>
              <label for="name" class="block text-sm font-medium text-indigo-900">Name</label>
              <input
                type="text"
                name="name"
                id="name"
                value="<%= user.name %>"
                required
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-yellow-400 focus:border-yellow-400"
              />
            </div>
            <div>
              <label for="age" class="block text-sm font-medium text-indigo-900">Age</label>
              <input
                type="number"
                name="age"
                id="age"
                value="<%= user.age %>"
                required
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-yellow-400 focus:border-yellow-400"
              />
            </div>
          </div>

          <div>
            <label for="location" class="block text-sm font-medium text-indigo-900">Location</label>
            <input
              type="text"
              name="location"
              id="location"
              value="<%= user.location %>"
              required
              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-yellow-400 focus:border-yellow-400"
            />
          </div>

          <% if (user.role === 'SHOP_OWNER') { %>
            <!-- Shop Owner Specific Fields -->
            <div>
              <label for="shopName" class="block text-sm font-medium text-indigo-900">Shop Name</label>
              <input
                type="text"
                name="shopName"
                id="shopName"
                value="<%= user.shopName %>"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-yellow-400 focus:border-yellow-400"
              />
            </div>
            <div>
              <label for="shopDescription" class="block text-sm font-medium text-indigo-900">Shop Description</label>
              <textarea
                name="shopDescription"
                id="shopDescription"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-yellow-400 focus:border-yellow-400"
              ><%= user.shopDescription %></textarea>
            </div>
            <div>
              <label for="shopAddress" class="block text-sm font-medium text-indigo-900">Shop Address</label>
              <input
                type="text"
                name="shopAddress"
                id="shopAddress"
                value="<%= user.shopAddress %>"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-yellow-400 focus:border-yellow-400"
              />
            </div>
          <% } %>

          <!-- Submit Button -->
          <div>
            <button
              type="submit"
              class="w-full py-3 text-indigo-900 bg-yellow-400 rounded-lg font-bold hover:bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-yellow-500 shadow transition-colors"
            >
              Update Profile
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>
